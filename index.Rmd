---
title: "Midpoint Deliverable"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyr)
library(dplyr)
library(ggplot2)
library(vroom)
library(leaflet)
library(knitr)
library(kableExtra)

seattle_data <- 
    vroom("https://data.seattle.gov/api/views/tazs-3rd5/rows.csv")
seattle_data_two <-
  vroom('https://data.seattle.gov/resource/tazs-3rd5.csv')

source("scripts/table.R")
source("scripts/chart_1.R")
source("scripts/chart_2.R")
source("scripts/chart_3.R")
```

## Intro Paragraph 
Safety issues have always been in the spotlight, in the United States as strict gun regulations do not exist. And with the non-stop UW Alert messages reporting crimes, such as robberies and gun fires, safety has become one of the UW students' major concerns nowadays. Therefore, as a team, we decided to tie this project to our daily lives and analyze the pattern of crimes around our community. 

We will be using 3 data sets ([SPD Crime Data](https://data.seattle.gov/Public-Safety/SPD-Crime-Data-2008-Present/tazs-3rd5), [King County Sheriff's Office - Incident Dataset](https://data.kingcounty.gov/Law-Enforcement-Safety/King-County-Sheriff-s-Office-Incident-Dataset/rzfs-wyvy), [911 Seattle Call Data](https://data.seattle.gov/Public-Safety/Call-Data/33kz-ixgy)). These datasets contain data such as offense start time, latitude & longitude, offense type, call-in resolution, etc., that help us answer these following questions:

* What areas have the highest density of crime? 
* What types of crime? And in what areas?
* What is the time of year or day for the offense, length of offense, report date?
* What is the relationship between call-ins and arrests (i.e. resolution of call-ins)?

#### Data Description

* [SPD Crime Data](https://data.seattle.gov/Public-Safety/SPD-Crime-Data-2008-Present/tazs-3rd5): This dataset provides crime data using the standardized crime classifications and is updated every twenty four hours.
* [King County Sheriff's Office - Incident Dataset](https://data.kingcounty.gov/Law-Enforcement-Safety/King-County-Sheriff-s-Office-Incident-Dataset/rzfs-wyvy): This dataset contains instances of crime reported by King Country Sherrif office and another policing agency, e.g. SPD.
* [911 Seattle Call Data](https://data.seattle.gov/Public-Safety/Call-Data/33kz-ixgy): 911 call data is from the Data Analytics Platform (DAP) and is logged with the Seattle Police Department (SPD) Communications Center. It contains calls of police officers and observations of the field from within the community and is updated(upload) daily before a full refresh twice a year. Although the dataset is quite huge with 4.34 Million rows of data, we acknowledge our constraint as this dataset only includes records with police responses to the 911 call. 

## Summary Paragraph

## Average Delay in Report Time
### By Neighborhood
This table groups the SPD Crime Data by neighborhoods (MCPP) and displays the
average delay between crime occurrence to report filed in days (from 2008 - present). Insert insights.
```{r first table, out.width='100%', echo=FALSE}
neighborhood_info <- by_neighborhood(seattle_data)
kable(neighborhood_info) %>%
  kable_styling(bootstrap_options = c("striped", "hover")) %>%
  scroll_box(height = "500px")
```

### By Offense
This table groups the SPD Crime Data by crime type (Offense) and displays the
average delay between crime occurrence to report filed in days (from 2008 - present). This unveils the correlation between crime types (i.e. assault, etc.)
& how long it takes people to submit reports, which gives light to the importance
of statute of limitations. Insert varaibles for concrete insights.
``` {r second table, out.width='100%', echo=FALSE}
offense_info <- by_offense(seattle_data)
kable(offense_info) %>%
  kable_styling(bootstrap_options = c("striped", "hover")) %>%
  scroll_box(height = "500px")
```

```{r insights, echo=FALSE}
avg_delay <- avg_report_delay(offense_info)
```
For all crime types, the difference in time between crime occurrence and report averaged to `r avg_delay`days.

## Most Popular Criminal Type
For this chart, we are trying to answer the question what crime type is the most popular. We decided to use a bar chart because it is the clearest way to display comparison between counts of data. It displays the type on the x axis and the count on the y axis. Therefore, we can easily trace each intersection and know that “Larceny-Theft” is the most popular crime in the Seattle area.

```{r out.width='100%', echo=FALSE}
most_pop_crime(seattle_data_two)
```

## Hour of Occurence
Criminal activity can theoretically occur at any time of day. An aspect that we wanted to explore was what times is/are most popular for crimes to happen. The chart below collects and compares the total number of offences across each hour of the day (in army time). This data was graphed using a scatterplot to not only show differences on the number of offences, but to also observe any potential trends. Aside from the extreme outlier at 0 hours (12:00 AM), it seems that as the day gets darker, or as it approaches the 20s, there is a slight increase in criminal offenses than times early in the morning/afternoon.
```{r out.width='100%', echo=FALSE}
crime_times(seattle_data_two)
```

## Visualization of Seattle's Criminal Activity
One of the most important aspect of the "911 Seattle Call Data" is that it contains longitudinal and latitudinal numbers. With this information, we decided to create an interactive map to show the relative location of each criminal activity. This method offers a unique perspective on not only the location of each crime call, but also which 'offense' was committed, which area of Seattle had the highest density of calls/crimes, and  which 'criminal type' offense was done. Each point reveals information about the "Address", "Crime Type" and "Offense". Looking at the map, it appears that most of the offenses occurred within the N, E, and W precincts.

```{r out.width='100%', echo = FALSE}
seattle_map(seattle_data_two)
```

